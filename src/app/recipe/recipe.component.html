<div class="container">
    <div class="row">
        <div class="col-sm-1">
            <button mat-flat-button color="warn" (click)="onBack()"><mat-icon class="back">keyboard_backspace</mat-icon></button>
        </div>
                
        <div class="col-sm" *ngIf="recipe">
            
            <div id="contentToConvert">

                <h4> 
                    {{ recipe.title }}

                    <mat-icon class="star" *ngFor="let fullStar of fullStars">star</mat-icon>
                    <mat-icon class="star" *ngFor="let emptyStar of emptyStars">star_border</mat-icon>
                    <span class="moyenne">{{ moyenne | number : '1.0-1' }} / 5</span>

                    <app-favorite [idRecipe]="recipe.idRecipe"></app-favorite>
                    
                </h4>


                <p>
                    <mat-chip-list aria-label="Fish selection">
                        <mat-chip color="accent" selected>{{ recipe.type }} </mat-chip>
                    </mat-chip-list>
                </p>

                <p>
                    {{ recipe.description }}
                </p>

                
                <br><br>


                <p>
                    <mat-icon color="accent">timer</mat-icon> Préparation : {{ recipe.prepTime }} | Total :  {{ recipe.totalTime }}
                </p>

                <p>Ingrédients :</p>

                <ul>
                    <li *ngFor="let ingredient of recipe.ingredients"> {{ ingredient }} </li>
                </ul>

                <p>Etapes :</p>

                <ul>
                    <li *ngFor="let step of recipe.steps; let i = index"> {{ i + 1 }}. {{ step }}</li>
                </ul>

            </div>

            <br>

            <button mat-flat-button color="warn" (click)="onSave()"><mat-icon>save_alt</mat-icon> Sauvegarder</button>

            <app-rate [idRecipe]="recipe.idRecipe" [rates]="recipe.rates"></app-rate>


            <app-image [photos]="recipe.photos" [idRecipe]="recipe.idRecipe"></app-image>
            
            <br><br>
            <!-- composant pour écrire un commentaire -->
            <h4>Poster un commentaire</h4>
            <app-create-comment [idRecipe]="recipe.idRecipe"></app-create-comment>
            <br><br>
            
            <!-- composant pour afficher les commentaires -->
            <div *ngIf="recipe.comments">
                <h4>Commentaires</h4>
                <app-comment *ngFor="let comment of recipe.comments"
                            [comment]="comment"
                ></app-comment>
            </div>

        </div>

    </div>
</div>